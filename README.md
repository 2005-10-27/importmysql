# importmysql
SQL 文件导入工具
介绍
本工具是一个用于将 SQL 文件批量导入 MySQL 数据库的桌面应用程序。它通过直观的图形界面，为数据库管理员和开发人员提供了一种高效、便捷的方式来管理大量 SQL 文件的导入工作。无论是创建独立数据库还是合并到指定数据库，该工具都能满足不同场景下的需求。
功能特点
批量导入 SQL 文件
支持从目录或选择多个文件进行导入
支持不同大小的 SQL 文件，提升导入效率
两种导入模式
每个文件创建独立数据库
每个 SQL 文件会被导入到以文件名命名的独立数据库中
适合需要为每个 SQL 文件创建单独环境的场景
导入到指定数据库
所有 SQL 文件会被导入到用户指定的数据库中
适合需要将多个 SQL 文件数据合并到一个数据库的场景
实时日志记录和显示
导入过程中的所有操作和结果都会记录在日志区域
支持将日志导出为文件，便于后续查看和分析
进度条可视化导入进度
显示当前导入进度，让用户随时了解导入状态
日志文件生成和导出功能
自动生成日志文件，记录详细的导入过程
支持手动导出日志文件，方便保存和分享
安装步骤
安装 Python
确保已安装 Python 3.6 或更高版本
推荐使用 Python 官方下载页面 下载安装
安装过程中勾选 "Add Python to PATH" 选项，以便在命令行中直接使用 Python
安装依赖库
bash
pip install pymysql
pip install tk
pymysql：用于与 MySQL 数据库进行交互
tk：用于创建图形化界面
下载本项目
从项目仓库克隆代码或下载 ZIP 文件
bash
git clone https://github.com/2005-10-27/importmysql.git
解压下载的 ZIP 文件到目标目录
配置 MySQL 信息
在代码中修改以下数据库连接配置：
Python
self.host = "localhost"
self.user = "root"
self.password = "123456"
self.port = 3306
self.mysql_path = r"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysql.exe"
host：MySQL 服务器地址
user：MySQL 用户名
password：MySQL 用户密码
port：MySQL 服务器端口
mysql_path：MySQL 客户端可执行文件路径，根据实际安装路径修改
使用方法
启动应用程序
打开命令行，导航到项目目录
运行以下命令启动应用程序：
bash
python importTest.py
选择 SQL 文件
选择目录
点击“选择目录”按钮，打开文件夹选择对话框
选择包含 SQL 文件的目录，工具会自动加载该目录下的所有 SQL 文件
加载完成后，文件列表会在界面中显示
选择文件
点击“选择文件”按钮，打开文件选择对话框
选择一个或多个 SQL 文件，工具会将选中的文件添加到文件列表中
选中的文件会在界面中显示
选择导入模式
每个文件创建独立数据库
选择该模式后，每个 SQL 文件会被导入到一个以文件名命名的独立数据库中
适合需要为每个 SQL 文件创建单独环境的场景
导入到指定数据库
选择该模式后，所有 SQL 文件会被导入到用户指定的数据库中
在“目标数据库”输入框中输入目标数据库名称
工具会检查数据库是否存在，如果不存在会自动创建
适合需要将多个 SQL 文件数据合并到一个数据库的场景
开始导入
验证数据库连接
在开始导入之前，工具会验证数据库连接
如果连接失败，会弹出错误提示，显示连接失败的原因
请检查数据库配置信息是否正确，网络连接是否正常
导入过程
点击“开始导入”按钮开始导入过程
导入进度会在进度条中实时显示
导入结果会在日志区域实时显示，包括成功和失败的信息
可以通过日志区域查看详细的导入过程和结果
查看日志
导入过程中的所有操作都会记录在日志区域
可以点击“清空日志”按钮清除日志
导入完成后，可以选择生成日志文件，方便保存和查看导入记录
界面说明
文件选择区域
显示已选择的 SQL 文件列表
支持多文件选择和显示
可以通过滚动条查看所有文件
导入模式选择
提供两种导入模式的单选按钮
用户可以根据需求选择合适的导入模式
每个选项都有详细的说明文字，帮助用户理解模式的区别和适用场景
目标数据库输入框
在“导入到指定数据库”模式下，用于输入目标数据库名称
工具会根据输入的名称创建或使用现有数据库
日志区域
显示导入过程中的详细日志信息
包括成功和失败的操作记录
支持滚动查看历史日志
可以通过“清空日志”按钮清除日志内容
进度条
显示当前导入进度，以百分比形式表示
进度条会随着导入过程的推进而更新
用户可以通过进度条直观地了解导入状态
控制按钮
开始导入：开始导入 SQL 文件
清空日志：清除日志区域的内容
代码结构
SQLImporterApp 类
主应用程序类，包含所有功能实现
初始化界面元素和布局
处理用户交互和导入逻辑
log_message 方法
记录日志到界面和文件
支持不同级别的日志记录（INFO、ERROR）
日志会显示时间戳、日志级别和消息内容
select_directory 方法
处理选择目录逻辑
打开文件夹选择对话框
加载选中目录下的所有 SQL 文件
将文件路径添加到文件列表中
记录操作日志
select_files 方法
处理选择文件逻辑
打开文件选择对话框
允许选择多个 SQL 文件
将选中的文件路径添加到文件列表中
记录操作日志
validate_connection 方法
验证数据库连接
尝试连接到 MySQL 数据库
检查连接配置是否正确
返回连接是否成功的布尔值
记录连接验证结果日志
create_database 方法
创建新数据库
根据提供的数据库名称创建数据库
检查数据库是否已存在，避免重复创建
返回创建是否成功的布尔值
记录数据库创建结果日志
import_sql_file 方法
执行单个 SQL 文件导入
使用 MySQL 客户端命令行工具导入 SQL 文件
捕获导入过程中的错误和输出
返回导入是否成功的布尔值
记录导入结果日志
start_import 方法
导入主逻辑入口
验证数据库连接
检查是否选择了 SQL 文件
根据导入模式设置目标数据库
创建新线程执行导入过程
更新进度条和状态栏
禁用导入按钮，防止重复导入
process_import 方法
在新线程中处理导入过程
遍历所有选中的 SQL 文件
根据导入模式确定目标数据库
调用 import_sql_file 方法导入每个文件
更新进度条和状态栏
记录导入结果日志
统计成功和失败的文件数量
完成导入后弹出提示框
提供生成日志文件的选项
示例截图
见Clone的图片：
Snipaste_2025-05-09_17-21-20.png
文件选择区域：显示已选择的 SQL 文件列表
导入模式选择：提供两种导入模式的单选按钮
目标数据库输入框：在“导入到指定数据库”模式下输入目标数据库名称
日志区域：显示导入过程中的详细日志信息
进度条：显示当前导入进度
控制按钮：包括“开始导入”和“清空日志”按钮
常见问题解答
Q1: 如何处理导入失败的情况？
A1: 如果导入失败，工具会在日志区域显示失败原因。您可以根据错误信息检查 SQL 文件的语法、数据库权限、网络连接等。修复问题后，可以重新导入失败的文件。
Q2: 是否支持导入大文件？
A2: 是的，工具支持导入大文件。但导入大文件可能需要较长时间，具体取决于文件大小和数据库服务器性能。建议在导入大文件时确保网络稳定，避免中断。
Q3: 如何查看详细的导入日志？
A3: 导入过程中的所有操作都会记录在日志区域。您可以通过滚动查看历史日志，或者点击“生成日志文件”按钮将日志导出为文件，方便后续查看和分析。
Q4: 是否可以自定义数据库字符集？
A4: 当前版本使用 UTF-8MB4 作为默认字符集。如果需要自定义字符集，可以在 import_sql_file 方法中修改命令参数。例如：
Python

cmd = [
    self.mysql_path,
    "-h", self.host,
    "-u", self.user,
    f"-p{self.password}",
    "--default-character-set=your_charset",  # 自定义字符集
    target_db
]
Q5: 如何更新 MySQL 客户端路径？
A5: 在代码中找到以下行，修改 mysql_path 为您实际的 MySQL 客户端可执行文件路径：
Python

self.mysql_path = r"your\mysql\path\here\mysql.exe"
联系我们
如果您在使用过程中遇到任何问题或有任何建议，请通过以下方式联系我们：
Gmail邮箱：xjlverycool@gmail.com
QQ邮箱：2043586842@qq.com
GitHub 仓库：https://github.com/2005-10-27/
希望本工具能为您的数据库管理工作带来便利！
